{"ast":null,"code":"import \"core-js/modules/es.object.to-string.js\";\nimport Vue from 'vue';\nimport VueRouter from 'vue-router';\nimport Dashboard from '../views/Dashboard.vue';\nimport Login from '../views/Login.vue';\nimport Processes from '../views/Processes.vue';\nimport Settings from '../views/Settings.vue';\nimport axiosAuth from '@/api/axios-auth';\nVue.use(VueRouter);\nvar routes = [{\n  path: '/',\n  name: 'index',\n  component: Index,\n  meta: {\n    requiresAuth: true\n  }\n}, {\n  path: '/dashboard',\n  name: 'dashboard',\n  component: Dashboard,\n  meta: {\n    requiresAuth: true\n  }\n}, {\n  path: '/login',\n  name: 'login',\n  component: Login\n}, {\n  path: '/processes',\n  name: 'processes',\n  component: Processes,\n  meta: {\n    requiresAuth: true\n  }\n}, {\n  path: '/settings',\n  name: 'settings',\n  component: Settings,\n  meta: {\n    requiresAuth: true\n  }\n}];\nvar router = new VueRouter({\n  mode: 'history',\n  base: process.env.BASE_URL,\n  routes: routes\n});\nrouter.beforeEach(function (to, from, next) {\n  var token = localStorage.getItem('token');\n  var requireAuth = to.matched.some(function (record) {\n    return record.meta.requiresAuth;\n  });\n\n  if (!requireAuth) {\n    next();\n  }\n\n  if (requireAuth && !token) {\n    next('/login');\n  }\n\n  if (to.path === '/login') {\n    if (token) {\n      axiosAuth.post('/verify-token').then(function () {\n        next('/dashboard');\n      }).catch(function () {\n        next();\n      });\n    } else {\n      next();\n    }\n  }\n\n  if (requireAuth && token) {\n    axiosAuth.post('/verify-token').then(function () {\n      next();\n    }).catch(function () {\n      next('/login');\n    });\n  }\n});\nexport default router;","map":{"version":3,"sources":["/home/daniel/Projects/Thesis/Jamadgy/python_backend/vue-flask/frontend/src/router/index.js"],"names":["Vue","VueRouter","Dashboard","Login","Processes","Settings","axiosAuth","use","routes","path","name","component","Index","meta","requiresAuth","router","mode","base","process","env","BASE_URL","beforeEach","to","from","next","token","localStorage","getItem","requireAuth","matched","some","record","post","then","catch"],"mappings":";AAAA,OAAOA,GAAP,MAAgB,KAAhB;AACA,OAAOC,SAAP,MAAsB,YAAtB;AAEA,OAAOC,SAAP,MAAsB,wBAAtB;AACA,OAAOC,KAAP,MAAkB,oBAAlB;AACA,OAAOC,SAAP,MAAsB,wBAAtB;AACA,OAAOC,QAAP,MAAqB,uBAArB;AACA,OAAOC,SAAP,MAAsB,kBAAtB;AAEAN,GAAG,CAACO,GAAJ,CAAQN,SAAR;AAEA,IAAMO,MAAM,GAAG,CACb;AACDC,EAAAA,IAAI,EAAE,GADL;AAEDC,EAAAA,IAAI,EAAE,OAFL;AAGDC,EAAAA,SAAS,EAAEC,KAHV;AAIDC,EAAAA,IAAI,EAAE;AAAEC,IAAAA,YAAY,EAAE;AAAhB;AAJL,CADa,EAOb;AACEL,EAAAA,IAAI,EAAE,YADR;AAEEC,EAAAA,IAAI,EAAE,WAFR;AAGEC,EAAAA,SAAS,EAAET,SAHb;AAIEW,EAAAA,IAAI,EAAE;AAAEC,IAAAA,YAAY,EAAE;AAAhB;AAJR,CAPa,EAab;AACEL,EAAAA,IAAI,EAAE,QADR;AAEEC,EAAAA,IAAI,EAAE,OAFR;AAGEC,EAAAA,SAAS,EAAER;AAHb,CAba,EAkBb;AACEM,EAAAA,IAAI,EAAE,YADR;AAEEC,EAAAA,IAAI,EAAE,WAFR;AAGEC,EAAAA,SAAS,EAAEP,SAHb;AAIES,EAAAA,IAAI,EAAE;AAAEC,IAAAA,YAAY,EAAE;AAAhB;AAJR,CAlBa,EAwBb;AACEL,EAAAA,IAAI,EAAE,WADR;AAEEC,EAAAA,IAAI,EAAE,UAFR;AAGEC,EAAAA,SAAS,EAAEN,QAHb;AAIEQ,EAAAA,IAAI,EAAE;AAAEC,IAAAA,YAAY,EAAE;AAAhB;AAJR,CAxBa,CAAf;AAgCA,IAAMC,MAAM,GAAG,IAAId,SAAJ,CAAc;AAC3Be,EAAAA,IAAI,EAAE,SADqB;AAE3BC,EAAAA,IAAI,EAAEC,OAAO,CAACC,GAAR,CAAYC,QAFS;AAG3BZ,EAAAA,MAAM,EAANA;AAH2B,CAAd,CAAf;AAOAO,MAAM,CAACM,UAAP,CAAkB,UAACC,EAAD,EAAKC,IAAL,EAAWC,IAAX,EAAoB;AACrC,MAAIC,KAAK,GAAGC,YAAY,CAACC,OAAb,CAAqB,OAArB,CAAZ;AACA,MAAIC,WAAW,GAAGN,EAAE,CAACO,OAAH,CAAWC,IAAX,CAAgB,UAAAC,MAAM;AAAA,WAAIA,MAAM,CAAClB,IAAP,CAAYC,YAAhB;AAAA,GAAtB,CAAlB;;AAEA,MAAI,CAACc,WAAL,EAAkB;AACjBJ,IAAAA,IAAI;AACJ;;AAED,MAAII,WAAW,IAAI,CAACH,KAApB,EAA2B;AAC1BD,IAAAA,IAAI,CAAC,QAAD,CAAJ;AACA;;AAED,MAAIF,EAAE,CAACb,IAAH,KAAY,QAAhB,EAA0B;AACzB,QAAIgB,KAAJ,EAAW;AACVnB,MAAAA,SAAS,CAAC0B,IAAV,CAAe,eAAf,EAAgCC,IAAhC,CAAqC,YAAM;AAC1CT,QAAAA,IAAI,CAAC,YAAD,CAAJ;AACA,OAFD,EAEGU,KAFH,CAES,YAAM;AACdV,QAAAA,IAAI;AACJ,OAJD;AAKA,KAND,MAOK;AACJA,MAAAA,IAAI;AACJ;AACD;;AAED,MAAII,WAAW,IAAIH,KAAnB,EAA0B;AACzBnB,IAAAA,SAAS,CAAC0B,IAAV,CAAe,eAAf,EAAgCC,IAAhC,CAAqC,YAAM;AAC1CT,MAAAA,IAAI;AACJ,KAFD,EAEGU,KAFH,CAES,YAAM;AACdV,MAAAA,IAAI,CAAC,QAAD,CAAJ;AACA,KAJD;AAKA;AACD,CAhCD;AAmCA,eAAeT,MAAf","sourcesContent":["import Vue from 'vue'\nimport VueRouter from 'vue-router'\n\nimport Dashboard from '../views/Dashboard.vue'\nimport Login from '../views/Login.vue'\nimport Processes from '../views/Processes.vue'\nimport Settings from '../views/Settings.vue'\nimport axiosAuth from '@/api/axios-auth'\n\nVue.use(VueRouter)\n\nconst routes = [\n  { \n\tpath: '/',\n\tname: 'index',\n\tcomponent: Index,\n\tmeta: { requiresAuth: true }\n  },\n  {\n    path: '/dashboard',\n    name: 'dashboard',\n    component: Dashboard,\n    meta: { requiresAuth: true }\n  },\n  {\n    path: '/login',\n    name: 'login',\n    component: Login\n  },\n  {\n    path: '/processes',\n    name: 'processes',\n    component: Processes,\n    meta: { requiresAuth: true }\n  },\n  {\n    path: '/settings',\n    name: 'settings',\n    component: Settings,\n    meta: { requiresAuth: true }\n  }\n]\n\nconst router = new VueRouter({\n  mode: 'history',\n  base: process.env.BASE_URL,\n  routes\n})\n\n\nrouter.beforeEach((to, from, next) => {\n\tlet token = localStorage.getItem('token');\n\tlet requireAuth = to.matched.some(record => record.meta.requiresAuth);\n\n\tif (!requireAuth) {\n\t\tnext();\n\t}\n\n\tif (requireAuth && !token) {\n\t\tnext('/login');\n\t}\n\n\tif (to.path === '/login') {\n\t\tif (token) {\n\t\t\taxiosAuth.post('/verify-token').then(() => {\n\t\t\t\tnext('/dashboard');\n\t\t\t}).catch(() => {\n\t\t\t\tnext();\n\t\t\t});\n\t\t}\n\t\telse {\n\t\t\tnext();\n\t\t}\n\t}\n\n\tif (requireAuth && token) {\n\t\taxiosAuth.post('/verify-token').then(() => {\n\t\t\tnext();\n\t\t}).catch(() => {\n\t\t\tnext('/login');\n\t\t})\n\t}\n});\n\n\nexport default router\n"]},"metadata":{},"sourceType":"module"}