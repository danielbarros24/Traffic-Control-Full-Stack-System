{"ast":null,"code":"import _toConsumableArray from \"/home/daniel/Projects/Thesis/Jamadgy/python_backend/vue-flask/frontend/node_modules/@babel/runtime/helpers/esm/toConsumableArray.js\";\nimport _asyncToGenerator from \"/home/daniel/Projects/Thesis/Jamadgy/python_backend/vue-flask/frontend/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";\nimport \"regenerator-runtime/runtime.js\";\nimport \"core-js/modules/es.regexp.exec.js\";\nimport \"core-js/modules/es.regexp.test.js\";\nimport \"core-js/modules/es.object.to-string.js\";\nimport \"core-js/modules/es.array.concat.js\";\nimport \"core-js/modules/es.json.stringify.js\";\nimport \"core-js/modules/es.array.join.js\";\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\nimport * as dayjs from \"dayjs\";\nexport default {\n  data: function data() {\n    return {\n      valid: true,\n      radioGroup: undefined,\n      nameRules: [function (v) {\n        return !!v;\n      }],\n      dateRules: [function (v) {\n        return !!v || \"Insert 2 dates\";\n      }, function (v) {\n        return /^\\d{4}-(0?[1-9]|1[012])-(0?[1-9]|[12][0-9]|3[01])~\\d{4}-(0?[1-9]|1[012])-(0?[1-9]|[12][0-9]|3[01])$/.test(v) || \"Insert 2 dates!\";\n      }],\n      dataCountCars: [{\n        name: \"Car Count\",\n        data: {\n          \"2017-01-01 10:30\": 3,\n          \"2017-01-02 11:30\": 4,\n          \"2017-01-03 11:30\": 4,\n          \"2017-01-04 11:30\": 4\n        }\n      }],\n      dataCountTruck: [{\n        name: \"Truck Count\",\n        data: {\n          \"2022-06-12T20:10:04.942367Z\": 138,\n          \"2022-06-12T22:25:34.926482Z\": 212,\n          \"2022-06-12T22:25:47.940676Z\": 6,\n          \"2022-06-12T22:26:00.955203Z\": 304,\n          \"2022-06-12T22:26:13.970707Z\": 461,\n          \"2022-06-12T22:26:26.985194Z\": 186,\n          \"2022-06-12T22:26:39.999933Z\": 451,\n          \"2022-06-12T22:26:53.014001Z\": 150,\n          \"2022-06-12T22:27:06.028525Z\": 352,\n          \"2022-06-12T22:27:19.043099Z\": 435,\n          \"2022-06-12T22:27:32.057333Z\": 80,\n          \"2022-06-12T22:27:45.071867Z\": 208,\n          \"2022-06-12T22:27:58.086354Z\": 77,\n          \"2022-06-12T22:28:11.101109Z\": 381,\n          \"2022-06-12T22:28:24.116565Z\": 187,\n          \"2022-06-12T22:28:37.130663Z\": 118,\n          \"2022-06-12T22:28:50.146349Z\": 82,\n          \"2022-06-12T22:29:03.161504Z\": 35,\n          \"2022-06-12T22:29:16.176647Z\": 437,\n          \"2022-06-12T22:29:29.191915Z\": 414,\n          \"2022-06-12T22:29:42.206997Z\": 274,\n          \"2022-06-12T22:29:55.222118Z\": 353,\n          \"2022-06-12T22:30:08.236713Z\": 75,\n          \"2022-06-12T22:30:21.250651Z\": 154,\n          \"2022-06-12T22:30:34.266940Z\": 5,\n          \"2022-06-12T22:30:47.282121Z\": 478,\n          \"2022-06-12T22:31:00.298726Z\": 91,\n          \"2022-06-12T22:31:13.313915Z\": 402,\n          \"2022-06-12T22:31:26.327312Z\": 305,\n          \"2022-06-12T22:31:39.342715Z\": 248,\n          \"2022-06-12T22:31:52.358112Z\": 219,\n          \"2022-06-12T22:32:05.373039Z\": 417,\n          \"2022-06-12T22:32:18.387929Z\": 246,\n          \"2022-06-12T22:32:31.403625Z\": 496,\n          \"2022-06-12T22:32:44.419451Z\": 9,\n          \"2022-06-12T22:32:57.434520Z\": 182,\n          \"2022-06-12T22:33:10.448511Z\": 442,\n          \"2022-06-12T22:33:23.463062Z\": 478,\n          \"2022-06-12T22:33:36.477575Z\": 491,\n          \"2022-06-12T22:33:49.490848Z\": 185,\n          \"2022-06-12T22:34:02.506367Z\": 217,\n          \"2022-06-12T22:34:15.520888Z\": 64,\n          \"2022-06-12T22:34:28.535206Z\": 432,\n          \"2022-06-12T22:34:41.549697Z\": 174,\n          \"2022-06-12T22:34:54.563960Z\": 419,\n          \"2022-06-12T22:35:07.578496Z\": 207,\n          \"2022-06-12T22:35:20.593669Z\": 374,\n          \"2022-06-12T22:35:33.607288Z\": 193,\n          \"2022-06-12T22:35:46.621861Z\": 68,\n          \"2022-06-12T22:35:59.634717Z\": 271,\n          \"2022-06-12T22:36:12.649395Z\": 122,\n          \"2022-06-12T22:36:25.663945Z\": 309,\n          \"2022-06-12T22:36:38.678801Z\": 314,\n          \"2022-06-12T22:36:51.693237Z\": 491,\n          \"2022-06-12T22:37:04.708894Z\": 481,\n          \"2022-06-12T22:37:17.723946Z\": 253,\n          \"2022-06-12T22:37:30.738448Z\": 179,\n          \"2022-06-12T22:37:43.752208Z\": 390,\n          \"2022-06-12T22:37:56.765361Z\": 365,\n          \"2022-06-12T22:38:09.780603Z\": 286,\n          \"2022-06-12T22:38:22.793931Z\": 80,\n          \"2022-06-12T22:38:35.808755Z\": 21,\n          \"2022-06-12T22:38:48.823021Z\": 255,\n          \"2022-06-12T22:39:01.837266Z\": 405,\n          \"2022-06-12T22:39:14.850593Z\": 83,\n          \"2022-06-12T22:39:27.865136Z\": 48,\n          \"2022-06-12T22:39:40.879890Z\": 283,\n          \"2022-06-12T22:39:53.894119Z\": 290,\n          \"2022-06-12T22:40:06.910010Z\": 417,\n          \"2022-06-12T22:40:19.924478Z\": 309,\n          \"2022-06-12T22:40:32.938768Z\": 137,\n          \"2022-06-12T22:40:45.952983Z\": 138,\n          \"2022-06-12T22:40:58.967517Z\": 490,\n          \"2022-06-12T22:41:11.982032Z\": 113,\n          \"2022-06-12T22:41:24.996342Z\": 374,\n          \"2022-06-12T22:41:38.009818Z\": 392,\n          \"2022-06-12T22:41:51.023916Z\": 312,\n          \"2022-06-12T22:42:04.038510Z\": 173,\n          \"2022-06-12T22:42:17.053204Z\": 216,\n          \"2022-06-12T22:42:30.067246Z\": 45,\n          \"2022-06-12T22:42:43.081771Z\": 422,\n          \"2022-06-12T22:42:56.097500Z\": 159,\n          \"2022-06-12T22:43:09.111307Z\": 431,\n          \"2022-06-12T22:43:22.125990Z\": 476,\n          \"2022-06-12T22:43:35.141068Z\": 486\n        }\n      }],\n      items: [{\n        title: \"Logout\",\n        icon: \"mdi-logout\",\n        click: function click() {\n          //console.log(\"logout\");\n          this.$router.push(\"/\");\n        }\n      }, {\n        title: \"Processes\",\n        icon: \"mdi-auto-fix\",\n        click: function click() {\n          console.log(\"processes\");\n          this.$router.push(\"processes\");\n        }\n      }, {\n        title: \"Settings\",\n        icon: \"mdi-cogs\",\n        click: function click() {\n          console.log(\"settings\");\n          this.$router.push(\"settings\");\n        }\n      }],\n      //dayjs().format('YYYY-MM-DD'),dayjs().format('YYYY-MM-DD')\n      editedItem: {\n        dates: [\"2022-06-12\", \"2022-06-12\"],\n        startHour: \"00:00\",\n        endHour: \"23:59\",\n        indicator: \"\"\n      },\n      defaultItem: {\n        dates: [\"2022-06-12\", \"2022-06-12\"],\n        startHour: \"00:00\",\n        endHour: \"23:59\",\n        indicator: \"\"\n      },\n      sensors: [],\n      menuStart: false,\n      menuEnd: false,\n      menu1: null,\n      menu2: null,\n      VehicleCountsGraph: false,\n      TrafficFlowAnalysisGraph: false,\n      NumberOfStayGraph: false,\n      PedestrianFlowGraph: false,\n      LenghtOfStayGraph: false\n    };\n  },\n  methods: {\n    getSensors: function getSensors() {\n      var _this = this;\n\n      return _asyncToGenerator( /*#__PURE__*/regeneratorRuntime.mark(function _callee() {\n        var urlDesktop, urlRasp, responseSensors, sensors_res;\n        return regeneratorRuntime.wrap(function _callee$(_context) {\n          while (1) {\n            switch (_context.prev = _context.next) {\n              case 0:\n                urlDesktop = \"127.0.0.1:5000\";\n                urlRasp = \"192.168.1.216:8080\";\n                _context.next = 4;\n                return fetch(\"http://\".concat(urlDesktop, \"/sensors\"));\n\n              case 4:\n                responseSensors = _context.sent;\n                _context.next = 7;\n                return responseSensors.json();\n\n              case 7:\n                sensors_res = _context.sent;\n                _this.sensors = sensors_res;\n\n              case 9:\n              case \"end\":\n                return _context.stop();\n            }\n          }\n        }, _callee);\n      }))();\n    },\n    getData: function getData() {\n      var _this2 = this;\n\n      return _asyncToGenerator( /*#__PURE__*/regeneratorRuntime.mark(function _callee2() {\n        var urlDesktop, urlRasp, sensor, dates, startHour, endHour, startTime, endTime, indicator, data_json, data_array, data, chart;\n        return regeneratorRuntime.wrap(function _callee2$(_context2) {\n          while (1) {\n            switch (_context2.prev = _context2.next) {\n              case 0:\n                urlDesktop = \"127.0.0.1:5000\";\n                urlRasp = \"192.168.1.216:8080\";\n                sensor = _this2.radioGroup;\n                dates = _this2.editedItem.dates;\n                startHour = _this2.editedItem.startHour;\n                endHour = _this2.editedItem.endHour;\n                startTime = dayjs(dates[0] + \" \" + startHour).toISOString();\n                endTime = dayjs(dates[1] + \" \" + endHour).toISOString();\n                indicator = 2;\n                _context2.next = 11;\n                return fetch(\"http://\".concat(urlDesktop, \"/chart?sensor=\").concat(sensor, \"&startTime=\").concat(startTime, \"&endTime=\").concat(endTime, \"&indicator=\").concat(indicator));\n\n              case 11:\n                data_json = _context2.sent;\n                _context2.next = 14;\n                return data_json.json();\n\n              case 14:\n                data_array = _context2.sent;\n                data = Object.assign.apply(Object, [{}].concat(_toConsumableArray(data_array)));\n                _this2.dataCountTruck[0].data = data;\n                chart = Chartkick.charts[\"chart-id\"];\n                chart.updateData(newData);\n                console.log(JSON.stringify(_this2.dataCountTruck[0]));\n\n              case 20:\n              case \"end\":\n                return _context2.stop();\n            }\n          }\n        }, _callee2);\n      }))();\n    },\n    handleClick: function handleClick(index) {\n      this.items[index].click.call(this);\n    }\n  },\n  computed: {\n    dateRangeText: function dateRangeText() {\n      return this.editedItem.dates.join(\"~\");\n    }\n  },\n  mounted: function mounted() {\n    var _this3 = this;\n\n    return _asyncToGenerator( /*#__PURE__*/regeneratorRuntime.mark(function _callee3() {\n      return regeneratorRuntime.wrap(function _callee3$(_context3) {\n        while (1) {\n          switch (_context3.prev = _context3.next) {\n            case 0:\n              _context3.next = 2;\n              return _this3.getSensors();\n\n            case 2:\n              _context3.next = 4;\n              return _this3.getData();\n\n            case 4:\n            case \"end\":\n              return _context3.stop();\n          }\n        }\n      }, _callee3);\n    }))();\n  }\n};","map":{"version":3,"mappings":"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","names":["data","valid","radioGroup","nameRules","dateRules","v","dataCountCars","name","dataCountTruck","items","title","icon","click","console","editedItem","dates","startHour","endHour","indicator","defaultItem","sensors","menuStart","menuEnd","menu1","menu2","VehicleCountsGraph","TrafficFlowAnalysisGraph","NumberOfStayGraph","PedestrianFlowGraph","LenghtOfStayGraph","methods","getSensors","urlDesktop","urlRasp","fetch","responseSensors","sensors_res","getData","sensor","startTime","dayjs","endTime","data_json","data_array","Object","chart","Chartkick","handleClick","index","computed","dateRangeText","mounted"],"sourceRoot":"src/views","sources":["Dashboard.vue"],"sourcesContent":["<template>\n  <div>\n    <v-app-bar color=\"transparent\" dark elevation=\"0\">\n      <v-img\n        max-height=\"35\"\n        max-width=\"35\"\n        src=\"../assets/logo_simple.png\"\n      ></v-img>\n      <v-toolbar-title class=\"ml-4\">Dashboard</v-toolbar-title>\n\n      <v-spacer></v-spacer>\n\n      <v-menu transition=\"slide-y-transition\" offset-y>\n        <template v-slot:activator=\"{ on, attrs }\">\n          <v-btn icon v-bind=\"attrs\" v-on=\"on\">\n            <v-icon>mdi-account</v-icon>\n          </v-btn>\n        </template>\n\n        <v-list>\n          <v-list-item\n            v-for=\"(item, index) in items\"\n            :key=\"index\"\n            @click=\"handleClick(index)\"\n          >\n            <v-list-item-icon>\n              <v-icon v-text=\"item.icon\"></v-icon>\n            </v-list-item-icon>\n            <v-list-item-title>{{ item.title }}</v-list-item-title>\n          </v-list-item>\n        </v-list>\n      </v-menu>\n    </v-app-bar>\n    <v-row no-gutters>\n      <v-col cols=\"1\" sm=\"3\" md=\"2\">\n        <v-card\n          class=\"d-flex ml-5 mt-13 pa-6\"\n          min-width=\"290\"\n          elevation=\"20\"\n          outlined\n        >\n          <v-card-text>\n            <h2 class=\"text-h6 text--primary\">Sensors</h2>\n            <v-radio-group v-model=\"radioGroup\" mandatory>\n              <v-radio\n                v-for=\"sensor in sensors\"\n                :key=\"sensor\"\n                :label=\"`${sensor.name}`\"\n                :value=\"sensor.name\"\n              ></v-radio>\n            </v-radio-group>\n\n            <div class=\"my-5\">\n              <v-form ref=\"form\" v-model=\"valid\">\n                <h2 class=\"text-h6 text--primary\">Time</h2>\n                <v-menu\n                  v-model=\"menu2\"\n                  :close-on-content-click=\"false\"\n                  :nudge-right=\"40\"\n                  transition=\"scale-transition\"\n                  offset-y\n                  min-width=\"auto\"\n                >\n                  <template v-slot:activator=\"{ on, attrs }\">\n                    <v-text-field\n                      v-model=\"dateRangeText\"\n                      label=\"Select date range\"\n                      prepend-icon=\"mdi-calendar\"\n                      readonly\n                      v-bind=\"attrs\"\n                      v-on=\"on\"\n                      required\n                      :rules=\"dateRules\"\n                    ></v-text-field>\n                  </template>\n                  <v-date-picker\n                    v-model=\"editedItem.dates\"\n                    range\n                  ></v-date-picker>\n                </v-menu>\n                <v-menu\n                  ref=\"menu1\"\n                  v-model=\"menuStart\"\n                  :close-on-content-click=\"false\"\n                  :nudge-right=\"40\"\n                  :return-value.sync=\"editedItem.startHour\"\n                  transition=\"scale-transition\"\n                  offset-y\n                  max-width=\"290px\"\n                  min-width=\"290px\"\n                >\n                  <template v-slot:activator=\"{ on, attrs }\">\n                    <v-text-field\n                      v-model=\"editedItem.startHour\"\n                      label=\"Start Time\"\n                      prepend-icon=\"mdi-clock-time-four-outline\"\n                      readonly\n                      v-bind=\"attrs\"\n                      v-on=\"on\"\n                      :rules=\"nameRules\"\n                      required\n                    ></v-text-field>\n                  </template>\n                  <v-time-picker\n                    v-if=\"menuStart\"\n                    v-model=\"editedItem.startHour\"\n                    format=\"24h\"\n                    scrollable\n                    full-width\n                    @click:minute=\"$refs.menu1.save(editedItem.startHour)\"\n                  ></v-time-picker>\n                </v-menu>\n\n                <v-menu\n                  ref=\"menu2\"\n                  v-model=\"menuEnd\"\n                  :close-on-content-click=\"false\"\n                  :nudge-right=\"40\"\n                  :return-value.sync=\"editedItem.endHour\"\n                  transition=\"scale-transition\"\n                  offset-y\n                  max-width=\"290px\"\n                  min-width=\"290px\"\n                >\n                  <template v-slot:activator=\"{ on, attrs }\">\n                    <v-text-field\n                      v-model=\"editedItem.endHour\"\n                      label=\"End Time\"\n                      prepend-icon=\"mdi-clock-time-four-outline\"\n                      readonly\n                      v-bind=\"attrs\"\n                      v-on=\"on\"\n                      :rules=\"nameRules\"\n                      required\n                    ></v-text-field>\n                  </template>\n                  <v-time-picker\n                    v-if=\"menuEnd\"\n                    v-model=\"editedItem.endHour\"\n                    format=\"24h\"\n                    scrollable\n                    full-width\n                    @click:minute=\"$refs.menu2.save(editedItem.endHour)\"\n                  ></v-time-picker>\n                </v-menu>\n              </v-form>\n            </div>\n\n            <h2 class=\"text-h6 text--primary\">Indicators</h2>\n            <v-checkbox\n              v-on:click=\"VehicleCountsGraph = !VehicleCountsGraph\"\n              label=\"Car Flow\"\n              value=\"Counts\"\n              hide-details\n            ></v-checkbox>\n            <v-checkbox\n              v-on:click=\"LenghtOfStayGraph = !LenghtOfStayGraph\"\n              label=\"Truck Flow\"\n              value=\"length\"\n              hide-details\n            ></v-checkbox>\n            <v-checkbox\n              v-on:click=\"TrafficFlowAnalysisGraph = !TrafficFlowAnalysisGraph\"\n              label=\"Bike flow\"\n              value=\"Flow\"\n              hide-details\n            ></v-checkbox>\n            <v-checkbox\n              v-on:click=\"TrafficFlowAnalysisGraph = !TrafficFlowAnalysisGraph\"\n              label=\"Double Park Vehicles\"\n              value=\"Flow\"\n              hide-details\n            ></v-checkbox>\n            <v-btn\n              depressed\n              color=\"primary\"\n              class=\"mt-10\"\n              @click=\"getData\"\n              :disabled=\"!valid\"\n            >\n              Submit\n            </v-btn>\n          </v-card-text>\n        </v-card>\n      </v-col>\n\n      <v-col cols=\"6\" md=\"10\" no-gutters class=\"mt-13\">\n        <v-row no-gutters max-height=\"320\">\n          <v-expand-transition>\n            <v-card\n              class=\"d-flex ml-3 mb-6 pa-6\"\n              width=\"1000\"\n              min-height=\"320\"\n              outlined\n            >\n              <area-chart\n                :data=\"dataCountTruck\"\n                :colors=\"['#32a852', '#2ca7b0']\"\n                label=\"Vehicle Count\"\n                legend=\"bottom\"\n                :dataset=\"{ borderWidth: 2 }\"\n              ></area-chart>\n            </v-card>\n          </v-expand-transition>\n          <v-expand-transition>\n            <v-card\n              class=\"d-flex ml-3 mb-6 pa-6\"\n              width=\"400\"\n              min-height=\"320\"\n              outlined\n              v-if=\"TrafficFlowAnalysisGraph\"\n            >\n            </v-card>\n          </v-expand-transition>\n        </v-row>\n\n        <v-row no-gutters max-height=\"320\">\n          <v-expand-transition>\n            <v-card\n              class=\"d-flex ml-3 pa-6\"\n              min-width=\"400\"\n              width=\"100\"\n              height=\"320\"\n              outlined\n              v-if=\"NumberOfStayGraph\"\n            >\n              <v-card-title class=\"text-center\">Number of Stay</v-card-title>\n            </v-card>\n          </v-expand-transition>\n\n          <v-expand-transition>\n            <v-card\n              class=\"d-flex ml-3 pa-6\"\n              min-width=\"400\"\n              width=\"700\"\n              height=\"320\"\n              outlined\n              v-if=\"PedestrianFlowGraph\"\n            >\n              <v-card-title class=\"text-center\">Pedestrian Flow</v-card-title>\n            </v-card>\n          </v-expand-transition>\n\n          <v-expand-transition>\n            <v-card\n              class=\"d-flex ml-3 pa-6\"\n              min-width=\"400\"\n              width=\"200\"\n              height=\"320\"\n              outlined\n              v-if=\"LenghtOfStayGraph\"\n            >\n              <v-card-title class=\"text-center\">Lenght of Stay</v-card-title>\n            </v-card>\n          </v-expand-transition>\n        </v-row>\n      </v-col>\n    </v-row>\n  </div>\n</template>\n\n\n<script>\nimport * as dayjs from \"dayjs\";\n\nexport default {\n  data() {\n    return {\n      valid: true,\n      radioGroup: undefined,\n\n      nameRules: [(v) => !!v],\n      dateRules: [\n        (v) => !!v || \"Insert 2 dates\",\n        (v) =>\n          /^\\d{4}-(0?[1-9]|1[012])-(0?[1-9]|[12][0-9]|3[01])~\\d{4}-(0?[1-9]|1[012])-(0?[1-9]|[12][0-9]|3[01])$/.test(\n            v\n          ) || \"Insert 2 dates!\",\n      ],\n\n      dataCountCars: [\n        {\n          name: \"Car Count\",\n          data: {\n            \"2017-01-01 10:30\": 3,\n            \"2017-01-02 11:30\": 4,\n            \"2017-01-03 11:30\": 4,\n            \"2017-01-04 11:30\": 4,\n          },\n        },\n      ],\n      dataCountTruck: [\n        {\n          name: \"Truck Count\",\n          data: {\n            \"2022-06-12T20:10:04.942367Z\": 138,\n            \"2022-06-12T22:25:34.926482Z\": 212,\n            \"2022-06-12T22:25:47.940676Z\": 6,\n            \"2022-06-12T22:26:00.955203Z\": 304,\n            \"2022-06-12T22:26:13.970707Z\": 461,\n            \"2022-06-12T22:26:26.985194Z\": 186,\n            \"2022-06-12T22:26:39.999933Z\": 451,\n            \"2022-06-12T22:26:53.014001Z\": 150,\n            \"2022-06-12T22:27:06.028525Z\": 352,\n            \"2022-06-12T22:27:19.043099Z\": 435,\n            \"2022-06-12T22:27:32.057333Z\": 80,\n            \"2022-06-12T22:27:45.071867Z\": 208,\n            \"2022-06-12T22:27:58.086354Z\": 77,\n            \"2022-06-12T22:28:11.101109Z\": 381,\n            \"2022-06-12T22:28:24.116565Z\": 187,\n            \"2022-06-12T22:28:37.130663Z\": 118,\n            \"2022-06-12T22:28:50.146349Z\": 82,\n            \"2022-06-12T22:29:03.161504Z\": 35,\n            \"2022-06-12T22:29:16.176647Z\": 437,\n            \"2022-06-12T22:29:29.191915Z\": 414,\n            \"2022-06-12T22:29:42.206997Z\": 274,\n            \"2022-06-12T22:29:55.222118Z\": 353,\n            \"2022-06-12T22:30:08.236713Z\": 75,\n            \"2022-06-12T22:30:21.250651Z\": 154,\n            \"2022-06-12T22:30:34.266940Z\": 5,\n            \"2022-06-12T22:30:47.282121Z\": 478,\n            \"2022-06-12T22:31:00.298726Z\": 91,\n            \"2022-06-12T22:31:13.313915Z\": 402,\n            \"2022-06-12T22:31:26.327312Z\": 305,\n            \"2022-06-12T22:31:39.342715Z\": 248,\n            \"2022-06-12T22:31:52.358112Z\": 219,\n            \"2022-06-12T22:32:05.373039Z\": 417,\n            \"2022-06-12T22:32:18.387929Z\": 246,\n            \"2022-06-12T22:32:31.403625Z\": 496,\n            \"2022-06-12T22:32:44.419451Z\": 9,\n            \"2022-06-12T22:32:57.434520Z\": 182,\n            \"2022-06-12T22:33:10.448511Z\": 442,\n            \"2022-06-12T22:33:23.463062Z\": 478,\n            \"2022-06-12T22:33:36.477575Z\": 491,\n            \"2022-06-12T22:33:49.490848Z\": 185,\n            \"2022-06-12T22:34:02.506367Z\": 217,\n            \"2022-06-12T22:34:15.520888Z\": 64,\n            \"2022-06-12T22:34:28.535206Z\": 432,\n            \"2022-06-12T22:34:41.549697Z\": 174,\n            \"2022-06-12T22:34:54.563960Z\": 419,\n            \"2022-06-12T22:35:07.578496Z\": 207,\n            \"2022-06-12T22:35:20.593669Z\": 374,\n            \"2022-06-12T22:35:33.607288Z\": 193,\n            \"2022-06-12T22:35:46.621861Z\": 68,\n            \"2022-06-12T22:35:59.634717Z\": 271,\n            \"2022-06-12T22:36:12.649395Z\": 122,\n            \"2022-06-12T22:36:25.663945Z\": 309,\n            \"2022-06-12T22:36:38.678801Z\": 314,\n            \"2022-06-12T22:36:51.693237Z\": 491,\n            \"2022-06-12T22:37:04.708894Z\": 481,\n            \"2022-06-12T22:37:17.723946Z\": 253,\n            \"2022-06-12T22:37:30.738448Z\": 179,\n            \"2022-06-12T22:37:43.752208Z\": 390,\n            \"2022-06-12T22:37:56.765361Z\": 365,\n            \"2022-06-12T22:38:09.780603Z\": 286,\n            \"2022-06-12T22:38:22.793931Z\": 80,\n            \"2022-06-12T22:38:35.808755Z\": 21,\n            \"2022-06-12T22:38:48.823021Z\": 255,\n            \"2022-06-12T22:39:01.837266Z\": 405,\n            \"2022-06-12T22:39:14.850593Z\": 83,\n            \"2022-06-12T22:39:27.865136Z\": 48,\n            \"2022-06-12T22:39:40.879890Z\": 283,\n            \"2022-06-12T22:39:53.894119Z\": 290,\n            \"2022-06-12T22:40:06.910010Z\": 417,\n            \"2022-06-12T22:40:19.924478Z\": 309,\n            \"2022-06-12T22:40:32.938768Z\": 137,\n            \"2022-06-12T22:40:45.952983Z\": 138,\n            \"2022-06-12T22:40:58.967517Z\": 490,\n            \"2022-06-12T22:41:11.982032Z\": 113,\n            \"2022-06-12T22:41:24.996342Z\": 374,\n            \"2022-06-12T22:41:38.009818Z\": 392,\n            \"2022-06-12T22:41:51.023916Z\": 312,\n            \"2022-06-12T22:42:04.038510Z\": 173,\n            \"2022-06-12T22:42:17.053204Z\": 216,\n            \"2022-06-12T22:42:30.067246Z\": 45,\n            \"2022-06-12T22:42:43.081771Z\": 422,\n            \"2022-06-12T22:42:56.097500Z\": 159,\n            \"2022-06-12T22:43:09.111307Z\": 431,\n            \"2022-06-12T22:43:22.125990Z\": 476,\n            \"2022-06-12T22:43:35.141068Z\": 486,\n          },\n        },\n      ],\n\n      items: [\n        {\n          title: \"Logout\",\n          icon: \"mdi-logout\",\n          click() {\n            //console.log(\"logout\");\n            this.$router.push(\"/\");\n          },\n        },\n        {\n          title: \"Processes\",\n          icon: \"mdi-auto-fix\",\n          click() {\n            console.log(\"processes\");\n            this.$router.push(\"processes\");\n          },\n        },\n        {\n          title: \"Settings\",\n          icon: \"mdi-cogs\",\n          click() {\n            console.log(\"settings\");\n            this.$router.push(\"settings\");\n          },\n        },\n      ],\n      //dayjs().format('YYYY-MM-DD'),dayjs().format('YYYY-MM-DD')\n      editedItem: {\n        dates: [\"2022-06-12\", \"2022-06-12\"],\n        startHour: \"00:00\",\n        endHour: \"23:59\",\n        indicator: \"\",\n      },\n\n      defaultItem: {\n        dates: [\"2022-06-12\", \"2022-06-12\"],\n        startHour: \"00:00\",\n        endHour: \"23:59\",\n        indicator: \"\",\n      },\n      sensors: [],\n\n      menuStart: false,\n      menuEnd: false,\n\n      menu1: null,\n      menu2: null,\n\n      VehicleCountsGraph: false,\n      TrafficFlowAnalysisGraph: false,\n      NumberOfStayGraph: false,\n      PedestrianFlowGraph: false,\n      LenghtOfStayGraph: false,\n    };\n  },\n\n  methods: {\n    async getSensors() {\n      const urlDesktop = \"127.0.0.1:5000\";\n      const urlRasp = \"192.168.1.216:8080\";\n\n      const responseSensors = await fetch(`http://${urlDesktop}/sensors`);\n      const sensors_res = await responseSensors.json();\n      this.sensors = sensors_res;\n    },\n\n    async getData() {\n      const urlDesktop = \"127.0.0.1:5000\";\n      const urlRasp = \"192.168.1.216:8080\";\n\n      const sensor = this.radioGroup;\n      const dates = this.editedItem.dates;\n\n      const startHour = this.editedItem.startHour;\n      const endHour = this.editedItem.endHour;\n\n      const startTime = dayjs(dates[0] + \" \" + startHour).toISOString();\n      const endTime = dayjs(dates[1] + \" \" + endHour).toISOString();\n\n      const indicator = 2;\n\n      const data_json = await fetch(\n        `http://${urlDesktop}/chart?sensor=${sensor}&startTime=${startTime}&endTime=${endTime}&indicator=${indicator}`\n      );\n      const data_array = await data_json.json();\n      const data = Object.assign({}, ...data_array);\n\n      this.dataCountTruck[0].data = data;\n\n      let chart = Chartkick.charts[\"chart-id\"];\n      chart.updateData(newData);\n\n      console.log(JSON.stringify(this.dataCountTruck[0]));\n    },\n\n    handleClick(index) {\n      this.items[index].click.call(this);\n    },\n  },\n  computed: {\n    dateRangeText() {\n      return this.editedItem.dates.join(\"~\");\n    },\n  },\n  async mounted() {\n    await this.getSensors();\n    await this.getData();\n  },\n};\n</script>\n"]},"metadata":{},"sourceType":"module"}